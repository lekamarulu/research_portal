{% load static %}

<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width initial-scale=1.0">
    <title>NHC-ERP | {{ module }} | {{ sub_module }} | {{ heading }} </title>
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
    <link rel="icon" href="{% static 'favicon.ico' %}" type="image/x-icon">
    <!-- GLOBAL MAINLY STYLES-->
    <link href="{% static 'vendors/bootstrap/dist/css/bootstrap.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/line-awesome/css/line-awesome.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/themify-icons/css/themify-icons.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/animate.css/animate.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/toastr/toastr.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/bootstrap-sweetalert/dist/sweetalert.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/bootstrap-select/dist/css/bootstrap-select.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/select2/dist/css/select2.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/jvectormap/jquery-jvectormap-2.0.3.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/dataTables/datatables.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/bootstrap-toggle/css/bootstrap4-toggle.min.css' %}" rel="stylesheet"/>

    <!--Datetime picker css    -->
    <link href="{% static 'vendors/bootstrap-datepicker/dist/css/bootstrap-datepicker3.min.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/bootstrap-daterangepicker/daterangepicker.css' %}" rel="stylesheet"/>
    <link href="{% static 'vendors/smalot-bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css' %}"
          rel="stylesheet"/>

    <!-- THEME STYLES-->
    <link href="{% static 'css/main.css' %}" rel="stylesheet"/>
    <link href="{% static 'css/base_child.css' %}" rel="stylesheet"/>
    <link href="{% static 'css/tagify.css' %}" rel="stylesheet"/>


    <!--Google Charts Loader-->
    <script src="{% static 'vendors/google-charts/loader.js' %}"></script>
    {% block styles %}{% endblock %}

    {% comment %} Time picker {% endcomment %}
    <link href="{% static 'css/timepicker.css' %}" rel="stylesheet"/>
    {% comment %} <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css"> {% endcomment %}
</head>

<body class="fixed-navbar">
<div class="page-wrapper">
    <!-- START HEADER-->
    {% block header %}
        {% include 'header.html' %}
    {% endblock %}
    <!-- END HEADER-->
    <!-- START SIDEBAR-->
    <nav class="page-sidebar" id="sidebar">
        <div id="sidebar-collapse">
            <ul class="side-menu metismenu scroller" data-height="600px">
                {% block side_menu %}
                {% endblock %}
            </ul>
        </div>
    </nav>
    <!-- END SIDEBAR-->
    <div class="content-wrapper">
        <!-- START PAGE CONTENT-->
        {% block content %} {% endblock %}
        <!-- END PAGE CONTENT-->
        <footer class="page-footer" style="">
            <div class="font-13">{% now 'Y' %} Â© <b>NHC</b> - National Housing Corporation</div>
            <div class="to-top"><i class="fa fa-angle-double-up"></i></div>
        </footer>
    </div>
</div>

<!-- BEGIN PAGA BACKDROPS-->
<div class="sidenav-backdrop backdrop"></div>
{#<div class="preloader-backdrop">#}
{#    <div class="page-preloader">Loading</div>#}
{#</div>#}
<!-- END PAGA BACKDROPS-->
<!-- CORE PLUGINS-->
<script src="{% static 'vendors/jquery/dist/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/popper.js/dist/umd/popper.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/bootstrap/dist/js/bootstrap.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/metisMenu/dist/metisMenu.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/jquery-slimscroll/jquery.slimscroll.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/jquery-idletimer/dist/idle-timer.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/toastr/toastr.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/bootstrap-sweetalert/dist/sweetalert.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/jquery-validation/dist/jquery.validate.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/jquery-validation/dist/additional-methods.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/bootstrap-select/dist/js/bootstrap-select.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/select2/dist/js/select2.full.min.js' %}"></script>
<script src="{% static 'vendors/chart.js/dist/Chart.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/jquery.easy-pie-chart/dist/jquery.easypiechart.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'vendors/jvectormap/jquery-jvectormap-2.0.3.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/jvectormap/jquery-jvectormap-world-mill-en.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/dataTables/datatables.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/jquery-loading-overlay/dist/loadingoverlay.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/jquery.form/jquery.form.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/pdf/build/pdf.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/moment/min/moment.min.js' %}"></script>
<script src="{% static 'vendors/jquery.maskedinput/dist/jquery.maskedinput.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/bootstrap-toggle/js/bootstrap4-toggle.min.js' %}" type="text/javascript"></script>
<script src="{% static 'vendors/auto-numeric/autoNumeric.js' %}" type="text/javascript"></script>

<script src="{% static 'js/jQuery.tagify.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/tagify.js' %}" type="text/javascript"></script>

<!--Datetime picker JS    -->
<script src="{% static 'vendors/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js' %}"></script>
<script src="{% static 'vendors/bootstrap-daterangepicker/daterangepicker.js' %}"></script>
<script src="{% static 'vendors/smalot-bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js' %}"></script>
<script src="{% static 'vendors/chart.js/dist/Chart.min.js' %}"></script>
<script src="{% static 'vendors/maskMoney/jquery.maskMoney.min.js' %}"></script>
<script src="{% static 'vendors/django-dynamic-formset/src/jquery.formset.js' %}"></script>
<script src="{% static 'js/app.min.js' %}" type="text/javascript"></script>
<!--Server side processing  templates JSON urls-->
<script type="text/javascript">var CONTRACT_LIST_JSON_URL = '{% url "legal:contracts:contract_list_json" %}';</script>
<script type="text/javascript">var CONTRACT_REQUEST_LIST_JSON_URL = '{% url "legal:contracts:contract_request_list_json" %}';</script>
<script src="{% static 'vendors/formset/jquery.formset.js' %}"></script>

{% comment %} Timepicker script {% endcomment %}
<script src="{% static 'js/timepicker.js' %}"></script>
{% comment %} <script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script> {% endcomment %}


<!-- Highchart scripts -->
<script src="{% static 'vendors/highcharts/js/highcharts.js' %}"></script>
<script src="{% static 'vendors/highcharts/js/variable-pie.js' %}"></script>
<script src="{% static 'vendors/highcharts/js/exporting.js' %}"></script>
<script src="{% static 'vendors/highcharts/js/export-data.js' %}"></script>
<script src="{% static 'vendors/highcharts/js/accessibility.js' %}"></script>
<script src="{% static 'js/htmx.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'js/alpine.min.js' %}" type="text/javascript"></script>
<script>
    toastr.options = {
        "closeButton": true,
        "debug": false,
        "newestOnTop": false,
        "progressBar": true,
        "positionClass": "toast-top-full-width",
        "preventDuplicates": true,
        {#"onclick": null,#}
        {#"showDuration": 9500,#}
        "hideDuration": 300,
        "timeOut": 18000,
        {#"extendedTimeOut": 0,#}
        {#"showEasing": "swing",#}
        {#"hideEasing": "linear",#}
        {#"showMethod": "fadeIn",#}
        {#"hideMethod": "fadeOut",#}
        {#"tapToDismiss": false#}
    };
    $(document).ready(function () {
        $(".datepicker").datepicker({
            autoclose: true,
            format: 'yyyy-mm-dd'
        });

        $(".datetimepicker").datetimepicker({
            autoclose: true,
            pickerPosition: "top-right"
        });

        $(document).on("change", '.datepicker, .datetimepicker', function (e) {
            $(this).trigger("focus").trigger("blur");
        });

        $(document).on("change", '.select2', function (e) {
            $(this).trigger('blur');
        });

        // Top validate End date greater than start date
        jQuery.validator.addMethod("greaterThan", function (value, element, params) {
            if ($(params[0]).val() !== '') {
                if (!/Invalid|NaN/.test(new Date(value))) {
                    return new Date(value) > new Date($(params[1]).val());
                }
                return isNaN(value) && isNaN($(params[1]).val()) || (Number(value) > Number($(params[1]).val()));
            }
            return true;
        }, 'End date must be greater or equal to start date');
        jQuery.validator.addMethod("greaterThanOrEqual", function (value, element, params) {
            if ($(params[0]).val() !== '') {
                if (!/Invalid|NaN/.test(new Date(value))) {
                    return new Date(value) >= new Date($(params[1]).val());
                }
                return isNaN(value) && isNaN($(params[1]).val()) || (Number(value) >= Number($(params[1]).val()));
            }
            return true;
        }, 'End date must be greater or equal to start date');

        $(document).ajaxSend(function (event, jqxhr, settings) {
            $(".ajax-loader").LoadingOverlay("show", {
                background: "rgba(255,255,255,0.5)",
                imageColor: "#0f5391",
                size: 45,
                maxSize: 45,
                minSize: 45
            });
        });

        $(document).ajaxComplete(function (event, jqxhr, settings) {
            $('.ajax-loader').LoadingOverlay("hide");
            $('.load').removeClass("hide");
        });

        $(function () {
            $("a[data-toggle='tab']").on("show.bs.tab", function (e) {
                localStorage.setItem("activeTab", $(e.target).attr("href"));
            });
            var activeTab = localStorage.getItem("activeTab");
            if (activeTab) {
                var navTab = $(".nav-tabs a[href='" + activeTab + "']");
                navTab.tab("show");
            }

            $(".nav-tabs a").on("show.bs.tab", function (e) {
                var activeTab = $(e.target);
                var prevTab = $(e.relatedTarget);
                $(prevTab.attr("href")).removeClass("active");
                localStorage.setItem("activeTab", activeTab.attr("href"));

                $(".breadcrumb li").last().remove(".active");
                $(".breadcrumb").append("<li class=\"breadcrumb-item active\">" + activeTab.text() + "</li>");

            });

        });
        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                function getCookie(name) {
                    var cookieValue = null;
                    if (document.cookie && document.cookie != '') {
                        var cookies = document.cookie.split(';');
                        for (var i = 0; i < cookies.length; i++) {
                            var cookie = jQuery.trim(cookies[i]);
                            // Does this cookie string begin with the name we want?
                            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                break;
                            }
                        }
                    }
                    return cookieValue;
                }

                if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                    // Only send the token to relative URLs i.e. locally.
                    xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                }
            }
        });
    });

    $('body').on('keydown', 'input, select', function (e) {
        if (e.key === "Enter") {
            var self = $(this), form = self.parents('form:eq(0)'), focusable, next;
            focusable = form.find('input,a,select,button').filter(':visible');
            next = focusable.eq(focusable.index(this) + 1);
            if (next.length) {
                next.focus();
            } else {
                form.submit();
            }
            return false;
        }
    });
    // Restricts input for the set of matched elements to the given inputFilter function.
    (function ($) {
        $.fn.inputFilter = function (inputFilter) {
            return this.on("input keydown keyup mousedown mouseup select contextmenu drop", function () {
                if (inputFilter(this.value)) {
                    this.oldValue = this.value;
                    this.oldSelectionStart = this.selectionStart;
                    this.oldSelectionEnd = this.selectionEnd;
                } else if (this.hasOwnProperty("oldValue")) {
                    this.value = this.oldValue;
                    this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
                } else {
                    this.value = "";
                }
            });
        };
    }(jQuery));
</script>
{% block scripts %} {% endblock %}
</body>

</html>